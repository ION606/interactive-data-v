<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>kubernetes collaboration – prototype v3</title>

		<script
			src="https://cdn.plot.ly/plotly-3.0.1.min.js"
			charset="utf-8"></script>
		<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

		<script type="module" src="./part2/part2_graphs.js"></script>

		<link rel="stylesheet" href="./part2/part2.css" />
	</head>

	<body>
		<!-- —— main dashboard —— -->
		<main>
			<header>
				<strong style="font-size: 1.25rem; flex: 1">
					Kubernetes Collaboration!
				</strong>
				<i>Itamar Oren-Naftalovich</i>
			</header>

			<nav id="page-tabs" style="margin: 1rem">
				<button class="active" data-role="home">Home</button>
				<button data-role="centrality">Network Centrality</button>
				<button data-role="ladder">Ladder Flow</button>
				<button data-role="diversity">Regional Diversity</button>
				<button onclick="window.location.pathname = 'survey'" class>
					⎘ Survey
				</button>
				<button onclick="window.location.pathname = 'tutorial'" class>
					⎘ Tutorial
				</button>
			</nav>

			<!-- Home Section with 4 cards -->
			<section data-role="home" class="active">
				<section id="about-kubernetes" class="about-section">
					<div class="about-content">
						<img
							src="https://github.com/kubernetes/kubernetes/blob/master/logo/logo.png?raw=true"
							alt="Kubernetes Logo"
							style="
								background-color: transparent;
								border: none;
								box-shadow: none;
							"
							class="k8s-logo" />
						<div>
							<h1>Kubernetes Collaboration Dashboard</h1>
							<p>
								<b>Kubernetes</b> is an open source container
								orchestration engine for automating deployment,
								scaling, and management of containerized
								applications.<br />
								This dashboard visualizes collaboration,
								diversity, and contributor mapping in the
								Kubernetes community.<br />
								<span class="about-link">
									<a
										href="https://kubernetes.io/docs/home/"
										target="_blank"
										>Learn more at kubernetes.io</a
									>
								</span>
							</p>
						</div>
					</div>
				</section>

				<div class="grid" id="homegrid">
					<div
						class="card"
						style="cursor: pointer"
						data-role="centrality">
						<h2>Network Centrality</h2>
						<p>
							Visualizes the collaboration network of contributors
							and maintainers.<br />
							<b>Includes:</b> Force-directed network and ranked
							centrality bar chart.<br />
						</p>
					</div>
					<div
						class="card"
						style="cursor: pointer"
						data-role="ladder">
						<h2>Ladder Flow</h2>
						<p>
							Shows contributor progression through the community
							ladder.<br />
							<b>Includes:</b> Line and area charts of role
							transitions over time.<br />
						</p>
					</div>
					<div
						class="card"
						style="cursor: pointer"
						data-role="diversity">
						<h2>Regional Diversity</h2>
						<p>
							Tracks geographic diversity of contributors.<br />
							<b>Includes:</b> Grouped bar and stacked area charts
							by region.<br />
						</p>
					</div>
				</div>
			</section>

			<!-- One section per page, each with both graph variants stacked vertically -->
			<section data-role="centrality">
				<button id="toggle-layout-btn" style="margin-bottom: 1rem">
					Toggle Layout
				</button>
				<div class="card" style="height: 100%">
					<h2>Network Centrality</h2>
					<div id="centrality-network" class="graph"></div>
					<p
						style="
							font-size: 0.95rem;
							color: #cbd5e1;
							margin-top: 0.5rem;
							width: 100%;
							text-align: center;
						">
						Node size is correlated to the contributor's centrality
						score in the network. Larger nodes are individuals who
						are more central or influential in the collaboration
						structure.
					</p>
				</div>
				<div class="card" style="width: 95%">
					<h2>Centrality Scores – Ranked Bars</h2>
					<div id="centrality-bars" class="graph"></div>
				</div>
			</section>

			<section data-role="ladder">
				<div class="card">
					<h2>Ladder Flow – Line</h2>
					<div id="ladder-line" class="graph"></div>
				</div>
			</section>

			<section data-role="diversity">
				<div class="card">
					<h2>Regional Diversity</h2>
					<div id="diversity-area" class="graph"></div>
				</div>
			</section>
		</main>

		<!-- Tutorial Modal -->
		<div id="tutorial-modal">
			<div>
				<h2>View Tutorial?</h2>
				<p>Would you like to view a tutorial for the dashboard?</p>
				<div style="margin-top: 2rem">
					<button id="tutorial-yes" style="margin-right: 1rem">
						Yes
					</button>
					<button id="tutorial-no">Skip Tutorial</button>
				</div>
			</div>
		</div>

		<script>
			const main = document.querySelector("main"),
				modal = document.getElementById("tutorial-modal"),
				yesBtn = document.getElementById("tutorial-yes"),
				noBtn = document.getElementById("tutorial-no");

			// Only show modal if tutorial not done
			if (!localStorage.getItem("tutorialDone")) {
				main.style.display = "none";
				modal.style.display = "flex";
			}

			yesBtn?.addEventListener("click", () => {
				window.location.pathname = "tutorial";
			});

			noBtn?.addEventListener("click", () => {
				localStorage.setItem("tutorialDone", "true");
				window.location.reload();
			});

			document.addEventListener("DOMContentLoaded", () => {
				mermaid.initialize({ startOnLoad: true });

				setTimeout(() => {
					// Pop effect for .card on home
					document
						.querySelectorAll('[data-role="home"] .card')
						.forEach((card, i) => {
							setTimeout(() => {
								card.classList.add("pop-effect");
								// Remove the class after animation so it can be triggered again if needed
								card.addEventListener(
									"animationend",
									() => {
										card.classList.remove("pop-effect");
									},
									{ once: true }
								);
							}, 240 * i); // stagger for a nice effect
						});
				}, 1500);
			});
		</script>
	</body>
</html>
